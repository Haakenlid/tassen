# overrides for development
version: '2.1'
services:
  webpack:
    image: universitas/webpack:edge
    command: dev-server
    ports:
      - "3000:3000"

  web:
    image: universitas/django:edge
    command: runserver
    ports:
      - "8000:8000"
  celery:
    image: universitas/django:edge
  celerybeat:
    image: universitas/django:edge
  flower:
    image: universitas/django:edge
    # celery monitoring
    command: flower
    restart: always
    ports:
      - "5555:5555"
    depends_on:
      - celery

volumes:
  # mount locally for vim code completion with ternjs
  node_modules:
    driver_opts:
      type: local
      device: ${PWD}/webpack/node_modules
      o: bind
